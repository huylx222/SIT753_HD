displayName: "High CPU Utilization Alert"
documentation:
  content: "High CPU utilization detected in application pods. This may indicate performance issues or potential resource constraints."
  mimeType: "text/markdown"
combiner: OR
conditions:
- displayName: "K8s Container - High CPU utilization"
  conditionThreshold:
    filter: 'resource.type="k8s_container" AND (resource.labels.container_name="api" OR resource.labels.container_name="web") AND metric.type="kubernetes.io/container/cpu/limit_utilization"'
    comparison: COMPARISON_GT
    thresholdValue: 0.85
    duration: 300s
    trigger:
      count: 1
    aggregations:
    - alignmentPeriod: 60s
      perSeriesAligner: ALIGN_MEAN
      crossSeriesReducer: REDUCE_MEAN
      groupByFields:
      - resource.labels.container_name
alertStrategy:
  autoClose: 1800s
  notificationRateLimit:
    period: 300s
severity: WARNING
enabled: true