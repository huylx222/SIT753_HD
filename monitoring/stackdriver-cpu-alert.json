{
    "displayName": "Face Detection - High CPU Usage",
    "combiner": "OR",
    "conditions": [
      {
        "displayName": "API Container CPU Usage",
        "conditionThreshold": {
          "filter": "resource.type = \"k8s_container\" AND resource.labels.container_name = \"api\" AND metric.type = \"kubernetes.io/container/cpu/core_usage_time\" AND resource.labels.cluster_name = \"cluster-1\"",
          "aggregations": [
            {
              "alignmentPeriod": "60s",
              "perSeriesAligner": "ALIGN_RATE",
              "crossSeriesReducer": "REDUCE_MEAN"
            }
          ],
          "comparison": "COMPARISON_GT",
          "thresholdValue": 0.01,
          "duration": "300s",
          "trigger": {
            "count": 1
          }
        }
      },
      {
        "displayName": "Web Container CPU Usage",
        "conditionThreshold": {
          "filter": "resource.type = \"k8s_container\" AND resource.labels.container_name = \"web\" AND metric.type = \"kubernetes.io/container/cpu/core_usage_time\" AND resource.labels.cluster_name = \"cluster-1\"",
          "aggregations": [
            {
              "alignmentPeriod": "60s",
              "perSeriesAligner": "ALIGN_RATE",
              "crossSeriesReducer": "REDUCE_MEAN"
            }
          ],
          "comparison": "COMPARISON_GT",
          "thresholdValue": 0.01,
          "duration": "300s",
          "trigger": {
            "count": 1
          }
        }
      }
    ],
    "alertStrategy": {
      "autoClose": "604800s"
    },
    "documentation": {
      "content": "This alert triggers when CPU usage for any container in the Face Detection application exceeds 70% of its allocation for more than 5 minutes continuously. This could indicate performance issues or resource constraints. Consider scaling up resources or optimizing the application if this alert triggers frequently.",
      "mimeType": "text/markdown"
    },
    "severity": "WARNING",
    "enabled": true
  }